<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="utf-8" />
    <title>Ma page de Supervision</title>
    <meta name="Description" content="Description du site" />
    <meta name="author" content="JB" />
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
    <link rel="icon" type="image/png" href="https://www.assurcyber.com/images/icone_rgsupervision.png">
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" id="titre">Navbar</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
      
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav mr-auto">
            
            
            
                <select class="dropdown">
                    <option class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      Dropdown button
                    </option>
                    <option class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                      <option class="dropdown-item" href="#">Action</a>
                      <option class="dropdown-item" href="#">Another action</a>
                      <option class="dropdown-item" href="#">Something else here</a>
                    </option>
                  </select>
            
            <li class="nav-item active">
                <a id="ajout" class="nav-link" href="#">Ajouter une procédure</a>
              </li>
              <li class="nav-item">
                  <a id="modif" class="nav-link" href="#">Modifier une procédure</a>
              </li>
              <li class="nav-item">
                  <a id="suppr" class="nav-link" href="#">Supprimer une procédure</a>
              </li>
              <li class="nav-item">
                <a id="retour" class="nav-link" href="/">DashBoard</a>
              </li>
          </ul>
          
        </div>
      </nav>
    <!--<h1 id="titre"></h1>-->
    <div>
        <!--<a type="button" id="ajout" class="btn btn-primary" href="">Ajouter une procédure</a>
        <a type="button" id="modif" class="btn btn-primary" href="#">Modifier une procédure</a>
        <a type="button" id="suppr" class="btn btn-primary" href="#">Supprimer une procédure</a>
        <a id="retour" class="btn btn-primary" href="/">DashBoard</a>-->
    </div>
    
    <div  style="height:500px; width:500px">
        <canvas id="myChart"></canvas>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="{{ url_for('static', filename='jquery.js') }}"></script>
    <script>
        $SCRIPT_ROOT = {{ request.script_root|tojson }};
      </script>
    <script>
        
        const labels = [
          'January',
          'February',
          'March',
          'April',
          'May',
          'June',
        ];
      
        const data = {
          labels: labels,
          datasets: [{
            label: 'CPU status',
            backgroundColor: 'rgb(255, 99, 132)',
            borderColor: 'rgb(255, 99, 132)',
            data: [0, 10, 5, 2, 20, 30, 45],
          }]
        };
      
        const config = {
          type: 'line',
          data: data,
          options: {}
        };
    
        const myChart = new Chart(
          document.getElementById('myChart'),
          config
        );
        
      
        var url = window.location.href;
        var url = new URL(url);
        var equipement = url.searchParams.get("equipement");
        if (equipement != null){
            document.getElementById('titre').innerText = equipement;
        };
        document.getElementById('ajout').href ="/ajoutProcedure?equipement=" + equipement;
        document.getElementById('modif').href ="/modifierProcedure?equipement=" + equipement;
        document.getElementById('suppr').href ="/supprProcedure?equipement=" + equipement;

        
        window.onload = function(){
            
            $.getJSON($SCRIPT_ROOT + '/returnInfoEquipement?equipement=' + equipement, {
            }, function(data) {
              alert(data.retour)
              
            });
            return false;
            
        }
        
    </script>
</body>

</html>